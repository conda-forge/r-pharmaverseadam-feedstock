{% set version = "1.2.0" %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-pharmaverseadam
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/pharmaverseadam_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/pharmaverseadam/pharmaverseadam_{{ version }}.tar.gz
  sha256: 47c509a43963b53d58357dedbef41f84ec755d1ff4c62ef6204962ebf4761a64

build:
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
  run:
    - r-base

test:
  commands:
    - $R -e "library('pharmaverseadam')"           # [not win]
    - "\"%R%\" -e \"library('pharmaverseadam')\""  # [win]

about:
  home: https://pharmaverse.github.io/pharmaverseadam/, https://github.com/pharmaverse/pharmaverseadam/
  license: Apache-2.0
  summary: A set of Analysis Data Model (ADaM) datasets constructed using the Study Data Tabulation Model (SDTM) datasets contained in the 'pharmaversesdtm' package and the template scripts from the 'admiral' family of packages. ADaM dataset specifications are described in the CDISC ADaM implementation guide, accessible
    by creating a free account on <https://www.cdisc.org/>.
  license_family: APACHE
  license_file:
    - LICENSE-2.0.txt

extra:
  recipe-maintainers:
    - conda-forge/r
